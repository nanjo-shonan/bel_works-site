<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    
    <!-- Google Tag Manager (GTM) - ここから -->
    <!-- 下の行にある「GTM-XXXXXXX」を、あなたのGTM-IDに書き換えてください -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KBRM4T3');</script>
    <!-- End Google Tag Manager -->
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ title }}｜{{ site.name }}</title>
    
    <meta name="description" content="{{ description }}">
    <link rel="icon" href="/images/favicon.png" type="image/png">

    <!-- 構造化データは各ページで定義されたものを、ここで展開する -->
    {{- structureddat | safe -}}
    
    <!-- 外部CSSファイルの読み込み -->
    <link rel="stylesheet" href="/css/style.css">
    
    <!-- Swiper.jsのCSS -->
    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />

    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&family=Noto+Sans+JP:wght@400;700;900&family=Noto+Serif+JP:wght@400;700&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = { theme: { extend: { colors: { 'bel-dark-blue': '#1e3a8a', 'bel-orange': '#f97316', 'bel-light-gray': '#f8fafc' }, fontFamily: { sans: ['Inter', 'Noto Sans JP', 'sans-serif'], serif: ['Noto Serif JP', 'serif'] } } } }
    </script>
</head>
<body class="bg-white text-gray-700">
    <!-- Google Tag Manager (noscript) - ここから -->
    <!-- 下の行にある「GTM-XXXXXXX」を、あなたのGTM-IDに書き換えてください -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KBRM4T3"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->

    {% include "header.html" %}

    <main>
        {{ content | safe }}
    </main>

    {% include "footer.html" %}

    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            if (mobileMenuButton && mobileMenu) {
                mobileMenuButton.addEventListener('click', () => { 
                    mobileMenu.classList.toggle('hidden'); 
                });
            }

            const faders = document.querySelectorAll('.fade-in-section');
            if (faders.length > 0) {
                const appearOptions = { threshold: 0.2, rootMargin: "0px 0px -50px 0px" };
                const appearOnScroll = new IntersectionObserver(function(entries, observer) { 
                    entries.forEach(entry => { 
                        if (!entry.isIntersecting) { 
                            return; 
                        } else { 
                            entry.target.classList.add('is-visible'); 
                            observer.unobserve(entry.target); 
                        } 
                    }); 
                }, appearOptions);
                faders.forEach(fader => { 
                    appearOnScroll.observe(fader); 
                });
            }

            document.querySelectorAll('a[href^="/#"]').forEach(anchor => { 
                anchor.addEventListener('click', function (e) { 
                    e.preventDefault(); 
                    const homeUrl = new URL(this.href, window.location.origin);
                    homeUrl.pathname = '/';
                    homeUrl.hash = this.hash;
                    
                    if (window.location.pathname === '/' || window.location.pathname === '/index.html') {
                        const targetId = this.getAttribute('href').substring(2);
                        const targetElement = document.getElementById(targetId);
                        if(targetElement) { 
                            const headerOffset = 88; 
                            const elementPosition = targetElement.getBoundingClientRect().top; 
                            const offsetPosition = elementPosition + window.pageYOffset - headerOffset; 
                            window.scrollTo({ top: offsetPosition, behavior: "smooth" }); 
                            if(mobileMenu && !mobileMenu.classList.contains('hidden')) { 
                                mobileMenu.classList.add('hidden'); 
                            } 
                        }
                    } else {
                        window.location.href = homeUrl.toString();
                    }
                }); 
            });

            const swiperContainer = document.querySelector('.swiper-container');
            if (swiperContainer) {
                var swiper = new Swiper('.swiper-container', { 
                    loop: true, 
                    slidesPerView: 1, 
                    spaceBetween: 30, 
                    pagination: { el: '.swiper-pagination', clickable: true, }, 
                    navigation: { nextEl: '.swiper-button-next', prevEl: '.swiper-button-prev', }, 
                    breakpoints: { 768: { slidesPerView: 2, }, 1024: { slidesPerView: 3, } } 
                });
            }
        });
    </script>

</body>
</html>
